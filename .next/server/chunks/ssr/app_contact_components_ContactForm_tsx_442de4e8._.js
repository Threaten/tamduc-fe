module.exports=[74988,a=>{"use strict";a.s(["default",()=>f]);var b=a.i(87924),c=a.i(19955),d=a.i(18952),e=a.i(72131);function f(){let a,{push:f}=(0,d.useToast)(),[g,h]=(0,e.useState)({name:"",email:"",phone:"",subject:"",message:""}),[i,j]=(0,e.useState)(!1),[k,l]=(0,e.useState)(!1),[m,n]=(0,e.useState)({}),o=/^(?:\+84|0)(?:3[2-9]|5[25689]|7[06-9]|8[1-689]|9[0-46-9])[0-9]{7}$/,p={name:a=>{let b=a.trim();return b?b.length<=5?"Name must be at least 6 characters":null:"Name is required"},email:a=>{let b=a.trim();return b?/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(b)?null:"Invalid email format":"Email is required"},phone:a=>{let b=a.replace(/[\s-]/g,"");return b?o.test(b)?null:"Invalid Vietnamese phone number":"Phone is required"},subject:a=>a.trim()?null:"Subject is required",message:a=>a.trim()?null:"Message is required"},q=async b=>{let d=await (0,c.getPatient)(`${b}`);return a=d.Patients.docs.length?d.Patients.docs[0].id:(await (0,c.createPatient)(g.name,g.phone,g.email).catch(a=>{console.error("Error creating patient:",a)})).createPatient.id},r=a=>{let{name:b,value:c}=a.target;h(a=>({...a,[b]:c})),((a,b)=>{let c=p[a];if(!c)return;let d=c(b);n(b=>{if(d)return{...b,[a]:d};let{[a]:c,...e}=b;return e})})(b,c)},s=async b=>{if((b.preventDefault(),!i)&&(()=>{let a={};return Object.keys(g).forEach(b=>{let c=p[b](g[b]);c&&(a[b]=c)}),n(a),0===Object.keys(a).length})()){j(!0);try{await q(g.phone),await (0,c.createMessage)(a,g.subject,g.message),l(!0),f("Message sent successfully","success")}catch(a){console.error(a),f("Failed to send message","error")}finally{j(!1)}}};return k?(0,b.jsxs)("div",{className:"rounded-2xl border border-black/10 dark:border-white/10 p-6 text-sm",children:[(0,b.jsx)("p",{className:"font-medium",children:"Thank you! Your message has been sent."}),(0,b.jsx)("button",{className:"mt-4 rounded-full px-4 py-2 border border-black/10 dark:border-white/10 text-xs",onClick:()=>{l(!1),h({name:"",email:"",phone:"",subject:"",message:""}),n({})},type:"button",children:"Send another message"})]}):(0,b.jsxs)("form",{onSubmit:s,className:"rounded-2xl border border-black/10 dark:border-white/10 p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm mb-1",htmlFor:"contact-name",children:"Name"}),(0,b.jsx)("input",{id:"contact-name",name:"name",value:g.name,onChange:r,className:"w-full rounded-md border border-black/10 dark:border-white/10 bg-transparent px-3 py-2 text-sm",placeholder:"Your name",required:!0,"aria-invalid":!!m.name}),m.name&&(0,b.jsx)("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:m.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm mb-1",htmlFor:"contact-email",children:"Email"}),(0,b.jsx)("input",{id:"contact-email",type:"email",name:"email",value:g.email,onChange:r,className:"w-full rounded-md border border-black/10 dark:border-white/10 bg-transparent px-3 py-2 text-sm",placeholder:"you@example.com",required:!0,"aria-invalid":!!m.email}),m.email&&(0,b.jsx)("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:m.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm mb-1",htmlFor:"contact-phone",children:"Phone"}),(0,b.jsx)("input",{id:"contact-phone",name:"phone",value:g.phone,onChange:r,className:"w-full rounded-md border border-black/10 dark:border-white/10 bg-transparent px-3 py-2 text-sm",placeholder:"0xx… or +84…",required:!0,"aria-invalid":!!m.phone}),m.phone&&(0,b.jsx)("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:m.phone})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm mb-1",htmlFor:"contact-subject",children:"Subject"}),(0,b.jsx)("input",{id:"contact-subject",name:"subject",value:g.subject,onChange:r,className:"w-full rounded-md border border-black/10 dark:border-white/10 bg-transparent px-3 py-2 text-sm",placeholder:"Subject",required:!0,"aria-invalid":!!m.subject}),m.subject&&(0,b.jsx)("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:m.subject})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm mb-1",htmlFor:"contact-message",children:"Message"}),(0,b.jsx)("textarea",{id:"contact-message",name:"message",value:g.message,onChange:r,className:"w-full rounded-md border border-black/10 dark:border-white/10 bg-transparent px-3 py-2 text-sm",rows:4,placeholder:"How can we help?",required:!0,"aria-invalid":!!m.message}),m.message&&(0,b.jsx)("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:m.message})]}),(0,b.jsx)("button",{disabled:i,className:"rounded-full px-5 py-2 text-sm font-medium border border-black/10 dark:border-white/10 disabled:opacity-50",children:i?"Sending...":"Send"})]})}}];

//# sourceMappingURL=app_contact_components_ContactForm_tsx_442de4e8._.js.map