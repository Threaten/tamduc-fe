{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/nghiahoang/Downloads/Projects/tamduc-clinic/tamduc-clinic-fe/app/components/hero-image.tsx"],"sourcesContent":["\"use client\";\nimport Image, { ImageProps } from \"next/image\";\nimport { useState, useCallback } from \"react\";\n\ntype Props = Omit<ImageProps, \"src\"> & {\n  src: string;\n  fallbackSrc?: string;\n  fallbackRemotes?: string[];\n};\n\nexport default function HeroImage({ src, fallbackSrc, fallbackRemotes, onError, ...rest }: Props) {\n  const [useFallback, setUseFallback] = useState(false);\n  const [remoteIndex, setRemoteIndex] = useState(0);\n\n  const handleError = useCallback<NonNullable<ImageProps[\"onError\"]>>(\n    (e) => {\n      // try next remote candidate first\n      const remotes = [src, ...(fallbackRemotes || [])];\n      if (remoteIndex < remotes.length - 1) {\n        setRemoteIndex((i) => i + 1);\n      } else if (!useFallback && fallbackSrc) {\n        setUseFallback(true);\n      }\n      onError?.(e);\n    },\n    [remoteIndex, src, fallbackRemotes, useFallback, fallbackSrc, onError]\n  );\n\n  const remotes = [src, ...(fallbackRemotes || [])];\n  const currentRemote = remotes[Math.min(remoteIndex, remotes.length - 1)];\n  const finalSrc = useFallback && fallbackSrc ? fallbackSrc : currentRemote;\n\n  return <Image src={finalSrc} onError={handleError} {...rest} alt={rest.alt ?? \"\"} />;\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAUe,SAAS,UAAU,EAAE,GAAG,EAAE,WAAW,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG,MAAa;IAC9F,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,MAAM,cAAc,IAAA,oNAAW,EAC7B,CAAC;QACC,kCAAkC;QAClC,MAAM,UAAU;YAAC;eAAS,mBAAmB,EAAE;SAAE;QACjD,IAAI,cAAc,QAAQ,MAAM,GAAG,GAAG;YACpC,eAAe,CAAC,IAAM,IAAI;QAC5B,OAAO,IAAI,CAAC,eAAe,aAAa;YACtC,eAAe;QACjB;QACA,UAAU;IACZ,GACA;QAAC;QAAa;QAAK;QAAiB;QAAa;QAAa;KAAQ;IAGxE,MAAM,UAAU;QAAC;WAAS,mBAAmB,EAAE;KAAE;IACjD,MAAM,gBAAgB,OAAO,CAAC,KAAK,GAAG,CAAC,aAAa,QAAQ,MAAM,GAAG,GAAG;IACxE,MAAM,WAAW,eAAe,cAAc,cAAc;IAE5D,qBAAO,8OAAC,wIAAK;QAAC,KAAK;QAAU,SAAS;QAAc,GAAG,IAAI;QAAE,KAAK,KAAK,GAAG,IAAI;;;;;;AAChF","debugId":null}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///Users/nghiahoang/Downloads/Projects/tamduc-clinic/tamduc-clinic-fe/app/contact/components/ContactForm.tsx"],"sourcesContent":["\"use client\";\nimport { createMessage, createPatient, getPatient } from \"@/lib/api/queries\";\nimport { useToast } from \"@/app/components/toast\";\nimport React, { useState } from \"react\";\n\ninterface ContactFormState {\n  name: string;\n  email: string;\n  phone: string;\n  subject: string;\n  message: string;\n}\n\nexport default function ContactForm() {\n  const { push } = useToast();\n  const [form, setForm] = useState<ContactFormState>({\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    subject: \"\",\n    message: \"\",\n  });\n  const [submitting, setSubmitting] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  // Vietnamese mobile phone regex (accepts +84 or leading 0 followed by valid carrier prefixes)\n  const vnPhoneRegex =\n    /^(?:\\+84|0)(?:3[2-9]|5[25689]|7[06-9]|8[1-689]|9[0-46-9])[0-9]{7}$/;\n\n  const validators: Record<\n    keyof ContactFormState,\n    (val: string) => string | null\n  > = {\n    name: (v) => {\n      const t = v.trim();\n      if (!t) return \"Tên là bắt buộc\";\n      if (t.length <= 5) return \"Tên phải có ít nhất 6 ký tự\";\n      return null;\n    },\n    email: (v) => {\n      const t = v.trim();\n      if (!t) return \"Email là bắt buộc\";\n      // Simple RFC5322-ish pattern (good enough for client-side)\n      const ok = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/.test(t);\n      return ok ? null : \"Định dạng email không hợp lệ\";\n    },\n    phone: (v) => {\n      const t = v.replace(/[\\s-]/g, \"\");\n      if (!t) return \"Số điện thoại là bắt buộc\";\n      return vnPhoneRegex.test(t)\n        ? null\n        : \"Số điện thoại Việt Nam không hợp lệ\";\n    },\n    subject: (v) => {\n      const t = v.trim();\n      if (!t) return \"Chủ đề là bắt buộc\";\n      return null;\n    },\n    message: (v) => {\n      const t = v.trim();\n      if (!t) return \"Nội dung là bắt buộc\";\n      return null;\n    },\n  };\n\n  let patient: string;\n\n  type Patient = {\n    id: string;\n    fullName: string;\n    phone: string;\n    email?: string;\n  };\n\n  const checkIfCustomerExisted = async (phone: string) => {\n    // Placeholder: integrate API call here.\n    const patientData = (await getPatient(`${phone}`)) as {\n      Patients: {\n        docs: Patient[];\n      };\n    };\n\n    if (!patientData.Patients.docs.length) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const newPatient: any = await createPatient(\n        form.name,\n        form.phone,\n        form.email\n      ).catch((error) => {\n        console.error(\"Error creating patient:\", error);\n      });\n\n      patient = newPatient.createPatient.id;\n    } else {\n      patient = patientData.Patients.docs[0].id;\n    }\n    return patient;\n  };\n\n  const validateField = (name: keyof ContactFormState, value: string) => {\n    const fn = validators[name];\n    if (!fn) return;\n    const error = fn(value);\n    setErrors((prev) => {\n      if (error) return { ...prev, [name]: error };\n      // Remove cleared error key; we intentionally ignore the discarded value.\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { [name]: _ignored, ...remaining } = prev;\n      return remaining;\n    });\n  };\n\n  const validateAll = () => {\n    const newErrors: Record<string, string> = {};\n    (Object.keys(form) as (keyof ContactFormState)[]).forEach((k) => {\n      const err = validators[k](form[k]);\n      if (err) newErrors[k] = err;\n    });\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => {\n    const { name, value } = e.target;\n    setForm((prev) => ({ ...prev, [name]: value }));\n    validateField(name as keyof ContactFormState, value);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (submitting) return;\n    // Final validation pass\n    if (!validateAll()) return;\n    setSubmitting(true);\n    try {\n      await checkIfCustomerExisted(form.phone);\n      await createMessage(patient, form.subject, form.message);\n      setSubmitted(true);\n      push(\"Gửi tin nhắn thành công\", \"success\");\n    } catch (err) {\n      console.error(err);\n      push(\"Gửi tin nhắn thất bại\", \"error\");\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  if (submitted) {\n    return (\n      <div className=\"rounded-2xl border border-black/10 dark:border-white/10 p-6 text-sm\">\n        <p className=\"font-medium\">Cảm ơn bạn! Tin nhắn đã được gửi.</p>\n        <button\n          className=\"mt-4 btn-secondary text-xs\"\n          onClick={() => {\n            setSubmitted(false);\n            setForm({\n              name: \"\",\n              email: \"\",\n              phone: \"\",\n              subject: \"\",\n              message: \"\",\n            });\n            setErrors({});\n          }}\n          type=\"button\"\n        >\n          Gửi tin nhắn khác\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <form\n      onSubmit={handleSubmit}\n      className=\"rounded-2xl border border-black/10 dark:border-white/10 p-6 space-y-4\"\n    >\n      <div>\n        <label className=\"block text-sm mb-1\" htmlFor=\"contact-name\">\n          Họ và tên\n        </label>\n        <input\n          id=\"contact-name\"\n          name=\"name\"\n          value={form.name}\n          onChange={handleChange}\n          className=\"w-full rounded-md border border-black/10 dark:border-white/10 bg-transparent px-3 py-2 text-sm\"\n          placeholder=\"Tên của bạn\"\n          required\n          aria-invalid={!!errors.name}\n        />\n        {errors.name && (\n          <p className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n            {errors.name}\n          </p>\n        )}\n      </div>\n      <div>\n        <label className=\"block text-sm mb-1\" htmlFor=\"contact-email\">\n          Email\n        </label>\n        <input\n          id=\"contact-email\"\n          type=\"email\"\n          name=\"email\"\n          value={form.email}\n          onChange={handleChange}\n          className=\"w-full rounded-md border border-black/10 dark:border-white/10 bg-transparent px-3 py-2 text-sm\"\n          placeholder=\"ban@vidu.com\"\n          required\n          aria-invalid={!!errors.email}\n        />\n        {errors.email && (\n          <p className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n            {errors.email}\n          </p>\n        )}\n      </div>\n      <div>\n        <label className=\"block text-sm mb-1\" htmlFor=\"contact-phone\">\n          Số điện thoại\n        </label>\n        <input\n          id=\"contact-phone\"\n          name=\"phone\"\n          value={form.phone}\n          onChange={handleChange}\n          className=\"w-full rounded-md border border-black/10 dark:border-white/10 bg-transparent px-3 py-2 text-sm\"\n          placeholder=\"0xx… or +84…\"\n          required\n          aria-invalid={!!errors.phone}\n        />\n        {errors.phone && (\n          <p className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n            {errors.phone}\n          </p>\n        )}\n      </div>\n      <div>\n        <label className=\"block text-sm mb-1\" htmlFor=\"contact-subject\">\n          Chủ đề\n        </label>\n        <input\n          id=\"contact-subject\"\n          name=\"subject\"\n          value={form.subject}\n          onChange={handleChange}\n          className=\"w-full rounded-md border border-black/10 dark:border-white/10 bg-transparent px-3 py-2 text-sm\"\n          placeholder=\"Chủ đề\"\n          required\n          aria-invalid={!!errors.subject}\n        />\n        {errors.subject && (\n          <p className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n            {errors.subject}\n          </p>\n        )}\n      </div>\n      <div>\n        <label className=\"block text-sm mb-1\" htmlFor=\"contact-message\">\n          Nội dung\n        </label>\n        <textarea\n          id=\"contact-message\"\n          name=\"message\"\n          value={form.message}\n          onChange={handleChange}\n          className=\"w-full rounded-md border border-black/10 dark:border-white/10 bg-transparent px-3 py-2 text-sm\"\n          rows={4}\n          placeholder=\"Chúng tôi có thể giúp gì cho bạn?\"\n          required\n          aria-invalid={!!errors.message}\n        />\n        {errors.message && (\n          <p className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n            {errors.message}\n          </p>\n        )}\n      </div>\n      <button disabled={submitting} className=\"btn-primary disabled:opacity-55\">\n        {submitting ? \"Đang gửi...\" : \"Gửi\"}\n      </button>\n    </form>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}